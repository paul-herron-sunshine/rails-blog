<p id="notice"><%= notice %></p>
<% provide(:title, 'Comments') %>
<% provide(:single_title, "All comments for #{@post.title}") %>

<%= link_to 'Back to Post', post_path(@post) %>

<section class="comments">
  <% if @comments.all.count > 0 %>

    <% @comments.each do |comment| %>
    <article class="comments__single">
      <header>
        <span class=><em>Posted at: <%= comment.created_at.strftime("%d/%m/%Y %H:%M:%S") %></span>
        <span>by <%= User.find(comment.user_id).name %></em></span>
      </header>
      <main style="font-size:1.4em;">"<%= comment.body %>"</main>
      <footer>
      <div class="comments__buttons-container">
        <%# <li class="button button--comment_post"><%= link_to '👀', [comment.post, comment] %></li>
        <%# if user logged and comment belongs to user %>
        <% if current_user && current_user.id == comment.user_id %></span>
          <li class="button button--comment_post"><%= link_to '✍️', edit_post_comment_path(comment.post, comment) %></li>
          <li class="button button--comment_post"><%= link_to '🗑️', [comment.post, comment], method: :delete, data: { confirm: 'Are you sure?' } %></li>
        <% end %>
        </div>
      </footer>
    </article>
    <% end %>
  <% else %>
    There are no comments for this post yet
  <% end %>
</section>

<% if current_user %>
  <%= link_to 'New Comment', new_post_comment_path %>
<% end %>